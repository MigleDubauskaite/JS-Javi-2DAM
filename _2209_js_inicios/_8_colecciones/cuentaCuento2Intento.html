<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cuenta Cuento: Parte 2‚òÄÔ∏èüí™ü¶Å</title>
</head>

<body>
  <h1>Cuenta Cuento: Parte 2 ‚òÄÔ∏èüí™ü¶Å</h1>

  <script>
    // Funci√≥n para obtener el cuento
    function obtenerCuento() {
      return `El cuento de la lechera. Una joven lechera llevaba en la cabeza un cubo de leche que acababa de orde√±ar.
Caminaba con paso ligero pensando en lo que har√≠a con el dinero cuando vendiera la leche.
"Comprar√© huevos", pens√≥ la lechera, "y cuando los pollitos crezcan, vender√© los pollos.
Con ese dinero podr√© comprar un vestido nuevo para lucirlo en la fiesta del pueblo.  
Seguro que cuando me vean con √©l, todos los j√≥venes me mirar√°n y podr√© elegir al que m√°s me guste."
Pensando en esto, la lechera comenz√≥ a dar saltos de alegr√≠a. El cubo se cay√≥, y toda la leche se derram√≥ por el suelo.
Sin leche, sin huevos, sin pollos, sin vestido y sin pretendientes. 
La lechera aprendi√≥ que no debemos contar con algo antes de tenerlo. 
Durante el camino de vuelta, la lechera lament√≥ lo ocurrido, pero luego pens√≥ que lo mejor era seguir adelante con optimismo.
El fracaso de sus planes la hizo reflexionar y ser m√°s precavida en el futuro.
Con el tiempo, la lechera prosper√≥ gracias a su esfuerzo y perseverancia, aunque nunca volvi√≥ a fantasear con lo que a√∫n no ten√≠a.`;
    }

    //2: devuelve palabras: array de strings

    function devuelvePalabras(texto) {
      texto = texto.replaceAll(/[,.\n"]/g, ' ');
      let palabras = texto.split(' ');
      palabras = palabras.filter((p) => p !== "");
      return palabras;
    }
    const arrayCuentoModificado = devuelvePalabras(obtenerCuento());
    let textoResultado2 = document.createElement("p");

    textoResultado2.innerText = arrayCuentoModificado.join(" ");
    document.body.append(textoResultado2);

    // 3: array palabras: en formato [][]

    function arrayPalabras(palabras) {
      for (const palabra of palabras) {
        document.body.append(`[${palabra}] `);
      }
      document.body.append(`Palabras en total:  ${palabras.length}`);
      document.body.innerHTML += "<br><br>";
    }
    arrayPalabras(arrayCuentoModificado);

    //4: array list palabras: primeras 5 palabras
    const arrayListaPalabras = new Array();
    let contadorPalabras = 0;

    function arrayListPalabras(palabras) {
      for (const palabra of palabras) {
        arrayListaPalabras.push(palabra);
        if (contadorPalabras < 5) {
          document.body.append(`[${palabra}] `);
        }
        contadorPalabras++;
      }
      document.body.append(`Palabras en total: ${arrayListaPalabras.length}`);
      document.body.innerHTML += "<br><br>";
    }
    arrayListPalabras(arrayCuentoModificado);

    // 5: hash set palabras: palabras unicas

    const setPalabrasUnicas = new Set();

    function hashSetPalabras(palabras) {
      contadorPalabras = 0;
      for (const palabra of palabras) {
        if (!setPalabrasUnicas.has(palabra)) {
          setPalabrasUnicas.add(palabra);
          document.body.append(`[${palabra}] `);
          if (contadorPalabras < 6) {
          }
          contadorPalabras++;
        }
      }
      document.body.append(`Palabras en total: ${setPalabrasUnicas.size}`);
      document.body.innerHTML += '<br><br>';
    }
    hashSetPalabras(arrayCuentoModificado);



    // 6: tree Set Palabras: palabras unicas ordenadas alfabeticamente

    function treeSetPalabras(palabras) {
      contadorPalabras = 0;

      const setPalabrasUnicasOrdenadas = new Set(palabras);
      /* Si llamas a sort() sin ninguna funci√≥n de comparaci√≥n, los elementos se ordenar√°n seg√∫n sus valores de punto de c√≥digo Unicode */
      /* localeCompare() compara dos cadenas */
      const setPalabras = [...setPalabrasUnicasOrdenadas].sort((a, b) => a.localeCompare(b));

      for (const palabra of setPalabras) {
        if(contadorPalabras < 5){

          document.body.append(`[${palabra}]`);
        }
        contadorPalabras++;
      }
      document.body.append(`Palabras en total: ${setPalabras.length}`)
      document.body.innerHTML += '<br><br>';

    }
    treeSetPalabras(setPalabrasUnicas);

    // 7: map conteo palabras: cuenta las repeticiones de cada palabra
    const mapaPalabras = new Map();

    function mapConteoPalabras(palabras){
      for(const palabra of palabras){
        if(mapaPalabras.has(palabra)){
          mapaPalabras.set(palabra, mapaPalabras.get(palabra) + 1);
        } else {
          mapaPalabras.set(palabra, 1);
        }
      }
      
      for(const [key, value] of mapaPalabras){
        document.body.append(`[${key} ‚Üí ${value} ${value === 1 ? "vez" : "veces"}] `);
      }
      document.body.innerHTML += '<br><br>';
    }
    mapConteoPalabras(arrayCuentoModificado);

    // 8: map conteo palabras ordenadas: palabras ordenadas con su conteo
    
    const mapConteoOrdenado= new Map();
    
    function mapConteoPalabrasOrdenadas(palabras){
      
      
      for(const palabra of palabras){
        if(mapConteoOrdenado.has(palabra)){
          mapConteoOrdenado.set(palabra, mapConteoOrdenado.get(palabra) + 1);
        }  else {
          mapConteoOrdenado.set(palabra, 1);
        }
      }
      
      const mapaOrdenado = [...mapConteoOrdenado.keys()].sort((a, b) => a.localeCompare(b));

      document.body.append(``);

      console.log(mapaOrdenado)


    }

    mapConteoPalabrasOrdenadas(arrayCuentoModificado);
   


  </script>
</body>

</html>